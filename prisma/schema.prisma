// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Sticker {
  id               String   @id @default(cuid())
  title            String
  description      String?
  file_url         String
  file_type        String   // 'image' or 'gif'
  thumbnail_url    String?
  tags             String[] // Array of tags
  telegram_pack_url String?
  discord_pack_url  String?
  uploader_wallet  String
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt

  favorites        Favorite[]

  @@index([uploader_wallet])
  @@index([created_at])
}

model Favorite {
  id               String   @id @default(cuid())
  wallet_address   String
  sticker_id       String
  created_at       DateTime @default(now())

  sticker          Sticker  @relation(fields: [sticker_id], references: [id], onDelete: Cascade)

  @@unique([wallet_address, sticker_id])
  @@index([wallet_address])
  @@index([sticker_id])
}

